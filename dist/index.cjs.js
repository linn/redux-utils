"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("redux-api-middleware");const t=e=>async(t,a,s)=>({data:await s.json(),item:e}),a=(e,t)=>({type:e[`REQUEST_${t}`],payload:{}}),s=(e,t)=>({type:e[`REQUEST_APPLICATION_STATE_${t}`],payload:{}}),r=(e,t)=>({type:e[`REQUEST_ADD_${t}`],payload:{}}),n=(e,t)=>({type:e[`REQUEST_UPDATE_${t}`],payload:{}}),o=(e,t)=>({type:e[`REQUEST_DELETE_${t}`],payload:{}}),i=(e,a,s)=>({type:e[`RECEIVE_UPDATED_${a}`],payload:t(s)}),E=(e,a,s)=>({type:e[`RECEIVE_${a}`],payload:t(s)}),p=(e,a,s)=>({type:e[`RECEIVE_APPLICATION_STATE_${a}`],payload:t(s)}),_=(e,a,s)=>({type:e[`RECEIVE_NEW_${a}`],payload:t(s)}),c=(e,a,s)=>({type:e[`RECEIVE_${a}`],payload:t(s)}),l=(e,a,s)=>({type:e[`RECEIVE_DELETED_${a}`],payload:t(s)}),d=(e,t)=>({type:e[`REQUEST_SEARCH_${t}`],payload:{}}),R=(e,t,a)=>({type:e[`REQUEST_${t}`],payload:{options:a}}),A=(e,a,s)=>({type:e[`RECEIVE_SEARCH_${a}`],payload:t(s)}),$=(e,t)=>({type:e[`REQUEST_POST_${t}`],payload:{}}),u=(e,a,s)=>({type:e[`RECEIVE_POST_${a}`],payload:t(s)}),S=(e,t)=>({type:e[`REQUEST_PATCH_${t}`],payload:{}}),T=(e,a,s)=>({type:e[`RECEIVE_PATCH_${a}`],payload:t(s)}),y=(e,t,a)=>({type:e[`FETCH_${t}_ERROR`],payload:async(e,t,s)=>s?{error:{status:s.status,statusText:`Error - ${s.status} ${s.statusText}`,details:await s.json(),item:a}}:"Network request failed"});const h="REQUEST_MENU",C="RECEIVE_MENU",m="REQUEST_NEWS",I="RECEIVE_NEWS",g="FETCH_ERROR",f={getHref:(e,t)=>{if(e&&e.links&&e.links.length>0){const a=e.links.find(e=>e.rel===t);return a?a.href:null}return null},getSelfHref:e=>f.getHref(e,"self"),sortList:e=>e.slice().sort((e,t)=>e<t?-1:e>t?1:0),sortEntityList:(e,t)=>e.slice().sort((e,a)=>e[t]<a[t]?-1:e[t]>a[t]?1:0)};function U(e={loading:!1,data:null},t){switch(t.type){case h:return{...e,loading:!0,data:null};case C:return{...e,loading:!1,data:t.payload.menu};default:return e}}function O(e={loading:!1,seen:[],unseen:[]},t){switch(t.type){case m:return{...e,loading:!0};case I:return{...e,loading:!1,unseen:t.payload.news.notifications?t.payload.news.notifications.filter(e=>!localStorage.getItem(e.title)):[],seen:t.payload.news.notifications?t.payload.news.notifications.filter(e=>localStorage.getItem(e.title)):[]};case"MARK_NOTIFICATION_SEEN":return{...e,seen:[...e.seen,...e.unseen.filter(e=>e.title===t.title)],unseen:e.unseen.filter(e=>e.title!==t.title)};default:return e}}const V={menu:U,news:O};exports.FetchApiActions=function(t,r,n,o,i,_){this.fetch=()=>({[e.RSAA]:{endpoint:`${i}${n}`,method:"GET",options:{requiresAuth:!0},headers:{Accept:_??"application/json"},types:[a(o,r),E(o,r,t),y(o,r,t)]}}),this.fetchById=s=>({[e.RSAA]:{endpoint:`${i}${n}/${s}`,method:"GET",options:{requiresAuth:!0},headers:{Accept:_??"application/json"},types:[a(o,r),E(o,r,t),y(o,r,t)]}}),this.fetchByPath=(s,p)=>({[e.RSAA]:{endpoint:`${i}${n}/${s}/${p}`,method:"GET",options:{requiresAuth:!0},headers:{Accept:_??"application/json"},types:[a(o,r),E(o,r,t),y(o,r,t)]}}),this.fetchPage=(s,p)=>({[e.RSAA]:{endpoint:`${i}${n}/${s}/${p}`,method:"GET",options:{requires:!0},headers:{Accept:_??"application/json"},types:[a(o,r),E(o,r,t),y(o,r,t)]}}),this.fetchSortedPage=(s,p,c,l)=>({[e.RSAA]:{endpoint:`${i}${n}/${s}/${p}/${c}/${l}`,method:"GET",options:{requires:!0},headers:{Accept:_??"application/json"},types:[a(o,r),E(o,r,t),y(o,r,t)]}}),this.search=a=>({[e.RSAA]:{endpoint:`${i}${n}?searchTerm=${a}`,method:"GET",options:{requiresAuth:!0},headers:{Accept:_??"application/json"},types:[d(o,r),A(o,r,t),y(o,r,t)]}}),this.searchWithOptions=(a,s)=>({[e.RSAA]:{endpoint:`${i}${n}?searchTerm=${a}${s}`,method:"GET",options:{requiresAuth:!0},headers:{Accept:_??"application/json"},types:[d(o,r),A(o,r,t),y(o,r,t)]}}),this.clearSearch=()=>({type:o[`CLEAR_SEARCH_${r}`],payload:{}}),this.clearItems=()=>({type:o[`CLEAR_${r}_DATA`],payload:{}}),this.fetchState=()=>({[e.RSAA]:{endpoint:`${i}${n}/application-state`,method:"GET",options:{requiresAuth:!0},headers:{Accept:"application/vnd.linn.application-state+json;version=1"},types:[s(o,r),p(o,r,t),y(o,r,t)]}})},exports.ItemType=function(e,t,a){this.item=e,this.actionType=t,this.uri=a},exports.ProcessActions=function(t,s,r,n,o,i="application/json"){this.requestProcessStart=(E,p=null)=>({[e.RSAA]:{endpoint:(()=>{let e=`${o}${r}`;if(p){e+=`?${new URLSearchParams(p).toString()}`}return e})(),method:"POST",options:{requiresAuth:!0},headers:{Accept:"application/json","Content-Type":i},body:E?"application/json"===i?JSON.stringify(E):E:"",types:[a(n,s),c(n,s,t),y(n,s,t)]}}),this.setMessageVisible=e=>!0===e?{type:n[`SHOW_${s}_MESSAGE`],payload:{}}:{type:n[`HIDE_${s}_MESSAGE`],payload:{}},this.clearErrorsForItem=()=>({type:n[`CLEAR_${s}_ERRORS`],payload:{item:t}}),this.clearProcessData=()=>({type:n[`CLEAR_${s}_DATA`],payload:{}})},exports.ReportActions=function(t,a,s,r,n){this.fetchReport=o=>{const i=o?`${n}${s}?${new URLSearchParams(o).toString()}`:`${n}${s}`;return{[e.RSAA]:{endpoint:i,method:"GET",options:{requiresAuth:!0},headers:{Accept:"application/json"},types:[R(r,a,o),E(r,a,t),y(r,a,t)]}}}},exports.StateApiActions=function(t,a,r,n,o,i){this.fetchState=()=>({[e.RSAA]:{endpoint:`${o}${r}/${i}`,method:"GET",options:{requiresAuth:!0},headers:{Accept:"application/vnd.linn.application-state+json;version=1"},types:[s(n,a),p(n,a,t),y(n,a,t)]}})},exports.UpdateApiActions=function(t,c,d,R,A,h){this.fetch=s=>({[e.RSAA]:{endpoint:`${A}${d}/${s}`,method:"GET",options:{requiresAuth:!0},headers:{Accept:h??"application/json"},types:[a(R,c),E(R,c,t),y(R,c,t)]}}),this.fetchByHref=s=>({[e.RSAA]:{endpoint:`${A}${s}`,method:"GET",options:{requiresAuth:!0},headers:{Accept:h??"application/json"},types:[a(R,c),E(R,c,t),y(R,c,t)]}}),this.fetchByPath=(s,r)=>({[e.RSAA]:{endpoint:`${A}${d}/${s}/${r}`,method:"GET",options:{requiresAuth:!0},headers:{Accept:h??"application/json"},types:[a(R,c),E(R,c,t),y(R,c,t)]}}),this.fetchByQueryString=(s,r)=>({[e.RSAA]:{endpoint:`${A}${d}?${s}=${r}`,method:"GET",options:{requiresAuth:!0},headers:{Accept:h??"application/json"},types:[a(R,c),E(R,c,t),y(R,c,t)]}}),this.add=a=>({[e.RSAA]:{endpoint:`${A}${d}`,method:"POST",options:{requiresAuth:!0},headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a),types:[r(R,c),_(R,c,t),y(R,c,t)]}}),this.update=(a,s)=>({[e.RSAA]:{endpoint:null!==a?`${A}${d}/${a}`:`${A}${d}`,method:"PUT",options:{requiresAuth:!0},headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s),types:[n(R,c),i(R,c,t),y(R,c,t)]}}),this.putByHref=(a,s)=>({[e.RSAA]:{endpoint:a,method:"PUT",options:{requiresAuth:!0},headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s),types:[n(R,c),i(R,c,t),y(R,c,t)]}}),this.patch=(a,s)=>({[e.RSAA]:{endpoint:`${A}${d}/${a}`,method:"PATCH",options:{requiresAuth:!0},headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s),types:[S(R,c),T(R,c,t),y(R,c,t)]}}),this.postByHref=(a,s="")=>({[e.RSAA]:{endpoint:`${A}${a}`,method:"POST",options:{requiresAuth:!0},headers:{Accept:h??"application/json","Content-Type":"application/json"},body:JSON.stringify(s),types:[$(R,c),u(R,c,t),y(R,c,t)]}}),this.delete=(a,s)=>({[e.RSAA]:{endpoint:null!==a?`${A}${d}/${a}`:`${A}${d}`,method:"DELETE",options:{requiresAuth:!0},headers:{Accept:"application/json","Content-Type":"application/json"},body:s?JSON.stringify(s):null,types:[o(R,c),l(R,c,t),y(R,c,t)]}}),this.reset=()=>({type:R[`RESET_${c}`],payload:{}}),this.setEditStatus=e=>({type:R[`SET_${c}_EDIT_STATUS`],payload:e}),this.clearErrorsForItem=()=>({type:R[`CLEAR_${c}_ERRORS`],payload:{item:t}}),this.create=()=>({type:R[`REQUEST_CREATE_${c}`],payload:{}}),this.setSnackbarVisible=e=>!0===e?{type:R[`SHOW_${c}_SNACKBAR`],payload:{}}:{type:R[`HIDE_${c}_SNACKBAR`],payload:{}},this.clearItem=()=>({type:R[`CLEAR_${c}_DATA`],payload:{}}),this.fetchState=()=>({[e.RSAA]:{endpoint:`${A}${d}/application-state`,method:"GET",options:{requiresAuth:!0},headers:{Accept:"application/vnd.linn.application-state+json;version=1"},types:[s(R,c),p(R,c,t),y(R,c,t)]}})},exports.collectionStoreFactory=function(e,t,a={loading:!1,searchLoading:!1,items:[],searchItems:[]},s=null){const r=e=>({...e,href:f.getSelfHref(e)}),n=e=>e&&s?e[s].map(e=>r(e)):e?e.map(e=>r(e)):e;return(s=a,r)=>{switch(r.type){case t[`REQUEST_${e}`]:return{...s,loading:!0};case t[`REQUEST_APPLICATION_STATE_${e}`]:return{...s,applicationState:{loading:!0}};case t[`RECEIVE_${e}`]:return{...s,loading:!1,items:n(r.payload.data)};case t[`RECEIVE_APPLICATION_STATE_${e}`]:return{...s,applicationState:{links:r.payload.data?r.payload.data.links:[],loading:!1}};case t[`REQUEST_SEARCH_${e}`]:return{...s,searchLoading:!0,searchItems:[]};case t[`RECEIVE_SEARCH_${e}`]:return{...s,searchLoading:!1,searchItems:n(r.payload.data)};case t[`CLEAR_SEARCH_${e}`]:return{...s,searchLoading:!1,searchItems:[]};case t[`CLEAR_${e}_DATA`]:return a;case t[`FETCH_${e}_ERROR`]:return{...s,loading:!1};case t[`REQUEST_UPDATE_${e}`]:return{...s,loading:!0};case t[`RECEIVE_UPDATED_${e}`]:return{...s,loading:!1,items:r.payload.data,snackbarVisible:!0};case t[`SHOW_${e}_SNACKBAR`]:return{...s,snackbarVisible:!0};case t[`HIDE_${e}_SNACKBAR`]:return{...s,snackbarVisible:!1};case t[`REQUEST_POST_${e}`]:return{...s,loading:!0};case t[`RECEIVE_POST_${e}`]:return{...s,loading:!1,items:r.payload.data,snackbarVisible:!0}}return s}},exports.collectionWithLinksStoreFactory=function(e,t,a={loading:!1,searchLoading:!1,items:[],searchItems:[],links:[]}){const s=e=>e?e.map(e=>{return t=e,{...t,href:f.getSelfHref(t)};var t}):e;return(r=a,n)=>{switch(n.type){case t[`REQUEST_${e}`]:return{...r,loading:!0};case t[`RECEIVE_${e}`]:return{...r,loading:!1,items:s(n.payload.data.responseData),links:n.payload.data.links};case t[`REQUEST_SEARCH_${e}`]:return{...r,searchLoading:!0,searchItems:[]};case t[`RECEIVE_SEARCH_${e}`]:return{...r,searchLoading:!1,searchItems:s(n.payload.data.responseData),links:n.payload.data.links};case t[`CLEAR_SEARCH_${e}`]:return{...r,searchLoading:!1,searchItems:[]};case t[`CLEAR_${e}_DATA`]:return a;case t[`FETCH_${e}_ERROR`]:return{...r,loading:!1}}return r}},exports.fetchErrorReducerFactory=function(e,t={requestErrors:[],itemErrors:[]}){return(a=t,s)=>{if(s.payload){if(s.payload.error&&e[s.payload.error.item]&&s.type===`FETCH_${e[s.payload.error.item].actionType}_ERROR`)return{...a,itemErrors:[...a.itemErrors,s.payload.error]};if(s.payload.item&&e[s.payload.item]){const t=e[s.payload.item];if((r=t.actionType,[`RECEIVE_${r}`,`RECEIVE_NEW_${r}`,`RECEIVE_UPDATED_${r}`]).indexOf(s.type)>-1)return{...a,itemErrors:a.itemErrors.filter(e=>e.item!==s.payload.item)};if(s.type===`CLEAR_${t.actionType}_ERRORS`)return{...a,itemErrors:a.itemErrors.filter(e=>e.item!==s.payload.item)}}}var r;return"CLEAR_ITEM_ERRORS"===s.type?{...a,itemErrors:[]}:s.error?{...a,requestErrors:[...a.requestErrors,{...s.payload,type:s.type}]}:s.error?a:{...a,requestErrors:a.requestErrors.filter(e=>e.type!==s.type)}}},exports.fetchMenu=(t,a)=>({[e.RSAA]:{endpoint:`${a}/intranet/menu-no-auth`,method:"GET",options:{requiresAuth:!1},headers:{Accept:"application/json"},types:[{type:h,payload:{}},{type:C,payload:async(e,t,a)=>({menu:await a.json(),item:"menu"})},{type:g,payload:(e,t,a)=>a?`Report - ${a.status} ${a.statusText}`:"Network request failed"}]}}),exports.fetchNews=(t,a)=>({[e.RSAA]:{endpoint:`${a}/notifications`,method:"GET",options:{requiresAuth:!1},headers:{Accept:"application/json"},types:[{type:m,payload:{}},{type:I,payload:async(e,t,a)=>({news:await a.json(),item:"news"})},{type:g,payload:(e,t,a)=>a?`Report - ${a.status} ${a.statusText}`:"Network request failed"}]}}),exports.hello=function(){return"Hello from linn-redux-utils!"},exports.itemStoreFactory=function(e,t,a={loading:!1,item:null,editStatus:"view",snackbarVisible:!1}){return(s=a,r)=>{switch(r.type){case t[`REQUEST_ADD_${e}`]:return{...s,loading:!0,editStatus:"create"};case t[`REQUEST_CREATE_${e}`]:return{...s,loading:!1,item:null,editStatus:"create"};case t[`REQUEST_${e}`]:return{...s,item:null,loading:!0,editStatus:"view"};case t[`REQUEST_APPLICATION_STATE_${e}`]:return{...s,applicationState:{loading:!0}};case t[`REQUEST_UPDATE_${e}`]:case t[`REQUEST_PATCH_${e}`]:case t[`REQUEST_DELETE_${e}`]:return{...s,loading:!0};case t[`FETCH_${e}_ERROR`]:return{...s,loading:!1};case t[`SET_${e}_EDIT_STATUS`]:return{...s,editStatus:r.payload};case t[`RESET_${e}`]:return{...s,editStatus:"view"};case t[`RECEIVE_${e}`]:return{...s,loading:!1,item:r.payload.data,editStatus:"view"};case t[`RECEIVE_APPLICATION_STATE_${e}`]:return{...s,applicationState:{links:r.payload.data?r.payload.data.links:[],loading:!1}};case t[`RECEIVE_UPDATED_${e}`]:case t[`RECEIVE_PATCH_${e}`]:return{...s,loading:!1,item:r.payload.data,editStatus:"view",snackbarVisible:!0};case t[`RECEIVE_DELETED_${e}`]:return{...s,loading:!1,item:r.payload.data,editStatus:"deleted",snackbarVisible:!0};case t[`RECEIVE_NEW_${e}`]:return{...s,loading:!1,item:r.payload.data,editStatus:"view",snackbarVisible:!0};case t[`REQUEST_POST_${e}`]:return{...s,loading:!0};case t[`RECEIVE_POST_${e}`]:return{...s,loading:!1,item:r.payload.data,editStatus:"view",snackbarVisible:!0};case t[`SHOW_${e}_SNACKBAR`]:return{...s,snackbarVisible:!0};case t[`HIDE_${e}_SNACKBAR`]:return{...s,snackbarVisible:!1};case t[`CLEAR_${e}_DATA`]:return a}return s}},exports.makeActionTypes=(e,t=!0,a=!1)=>{const s={};return s[`REQUEST_${e}`]=`REQUEST_${e}`,s[`REQUEST_APPLICATION_STATE_${e}`]=`REQUEST_APPLICATION_STATE_${e}`,s[`RECEIVE_${e}`]=`RECEIVE_${e}`,s[`RECEIVE_APPLICATION_STATE_${e}`]=`RECEIVE_APPLICATION_STATE_${e}`,s[`REQUEST_SEARCH_${e}`]=`REQUEST_SEARCH_${e}`,s[`RECEIVE_SEARCH_${e}`]=`RECEIVE_SEARCH_${e}`,s[`CLEAR_SEARCH_${e}`]=`CLEAR_SEARCH_${e}`,s[`FETCH_${e}_ERROR`]=`FETCH_${e}_ERROR`,s[`CLEAR_${e}_ERRORS`]=`CLEAR_${e}_ERRORS`,s[`CLEAR_${e}_DATA`]=`CLEAR_${e}_DATA`,t&&(s[`REQUEST_ADD_${e}`]=`REQUEST_ADD_${e}`,s[`REQUEST_CREATE_${e}`]=`REQUEST_CREATE_${e}`,s[`REQUEST_UPDATE_${e}`]=`REQUEST_UPDATE_${e}`,s[`RECEIVE_UPDATED_${e}`]=`RECEIVE_UPDATED_${e}`,s[`REQUEST_PATCH_${e}`]=`REQUEST_PATCH_${e}`,s[`RECEIVE_PATCH_${e}`]=`RECEIVE_PATCH_${e}`,s[`RESET_${e}`]=`RESET_${e}`,s[`RECEIVE_NEW_${e}`]=`RECEIVE_NEW_${e}`,s[`SET_${e}_EDIT_STATUS`]=`SET_${e}_EDIT_STATUS`,s[`SHOW_${e}_SNACKBAR`]=`SHOW_${e}_SNACKBAR`,s[`HIDE_${e}_SNACKBAR`]=`HIDE_${e}_SNACKBAR`,s[`REQUEST_POST_${e}`]=`REQUEST_POST_${e}`,s[`RECEIVE_POST_${e}`]=`RECEIVE_POST_${e}`),a&&(s[`REQUEST_DELETE_${e}`]=`REQUEST_DELETE_${e}`,s[`RECEIVE_DELETED_${e}`]=`RECEIVE_DELETED_${e}`),s},exports.makeProcessActionTypes=e=>{const t={};return t[`REQUEST_${e}`]=`REQUEST_${e}`,t[`RECEIVE_${e}`]=`RECEIVE_${e}`,t[`SHOW_${e}_MESSAGE`]=`SHOW_${e}_MESSAGE`,t[`HIDE_${e}_MESSAGE`]=`HIDE_${e}_MESSAGE`,t[`FETCH_${e}_ERROR`]=`FETCH_${e}_ERROR`,t[`CLEAR_${e}_ERRORS`]=`CLEAR_${e}_ERRORS`,t[`CLEAR_${e}_DATA`]=`CLEAR_${e}_DATA`,t},exports.makeReportActionTypes=e=>{const t={};return t[`REQUEST_${e}`]=`REQUEST_${e}`,t[`RECEIVE_${e}`]=`RECEIVE_${e}`,t[`FETCH_${e}_ERROR`]=`FETCH_${e}_ERROR`,t[`CLEAR_${e}_ERRORS`]=`CLEAR_${e}_ERRORS`,t},exports.markNotificationSeen=e=>({type:"MARK_NOTIFICATION_SEEN",title:e.title}),exports.menu=U,exports.news=O,exports.processStoreFactory=function(e,t,a={working:!1,messageText:"",messageVisible:!1},s="Completed successfully"){return(r=a,n)=>{switch(n.type){case t[`REQUEST_${e}`]:return{...r,working:!0,data:null};case t[`RECEIVE_${e}`]:return{...r,working:!1,messageText:(o=n.payload,o.data&&o.data.message?o.data.message:s),messageVisible:!0,data:n.payload.data};case t[`SHOW_${e}_MESSAGE`]:return{...r,messageVisible:!0};case t[`HIDE_${e}_MESSAGE`]:return{...r,messageVisible:!1};case t[`CLEAR_${e}_DATA`]:return{...r,working:!1,messageText:s,messageVisible:!1,data:null};case t[`FETCH_${e}_ERROR`]:return{...r,working:!1}}var o;return r}},exports.reducers=V,exports.reportOptionsFactory=function(e,t,a={}){return(s=a,r)=>r.type===t[`REQUEST_${e}`]?{...r.payload.options}:s},exports.reportResultsFactory=function(e,t,a={loading:!1,data:null}){return(s=a,r)=>{switch(r.type){case t[`REQUEST_${e}`]:return{...s,loading:!0,data:null};case t[`RECEIVE_${e}`]:return{...s,loading:!1,data:r.payload.data.reportResults?r.payload.data.reportResults[0]:r.payload.data};case t[`FETCH_${e}_ERROR`]:return{...s,loading:!1};default:return s}}},exports.reportsResultsFactory=function(e,t,a={loading:!1,data:null}){return(s=a,r)=>{switch(r.type){case t[`REQUEST_${e}`]:return{...s,loading:!0,data:null};case t[`RECEIVE_${e}`]:return{...s,loading:!1,data:r.payload.data.reportResults};case t[`FETCH_${e}_ERROR`]:return{...s,loading:!1};default:return s}}};
//# sourceMappingURL=index.cjs.js.map
